# This is a basic workflow to help you get started with Actions

name: CI
permissions:
      id-token: write
      contents: read
      
# Controls when the workflow will run
on:
  workflow_dispatch:
      
jobs: 
  Windows-latest:
      runs-on: windows-latest
      steps:
        - name: OIDC Login to Azure Public Cloud with AzPowershell (enableAzPSSession true)
          uses: azure/login@v1
          with:
            creds: ${{ secrets.AZURE_CREDENTIALS }}
            enable-AzPSSession: true
        - name: Get Publish Profile
          run: |
            echo "::set-output name=PUBLISH_PROFILE::$(az webapp deployment list-publishing-profiles -g 'resource-group-name' -n 'app-service-name' --xml)"
          id: getPublishProfile
          
 
